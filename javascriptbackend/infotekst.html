<html>
<head>
<title>Historiske vegreferanser</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>

html {
  font-family: sans-serif;
  font-size: 100%;
  margin: 0;
  height: 100%;
}

td { 
    align="left"
    padding="0 25px 25px 25px";
} 


tr {
    align="left"
}

tr:nth-child(even) {background-color: #f2f2f2;}

</style> 
</head>
<body>

<h1>Den 31. oktober 2022 legger vi ned det gamle vegreferansesystemet</h1>

Alle data er fremdeles tilgjengelig etter 2022-10-31, men da kun som  "historiske spørringer". Samtlige vegreferanseobjekter (objekttype 532 Vegreferanse) får en sluttdato denne dagen. 


<h1>Hent historiske vegreferanser som geojson</h1>

<p>Wrapper rundt <a href="http://visveginfo-static.opentns.org/help.htm" >visveginfo</a>-tjenesten. Returnere tidsutvikling for vegreferanse som geojson featureCollection. Hvis det du ber om ikke finnes så er listen over features tom. Merk at koordinatene er UTM-koordinater for sone 33 (EPSG:25833). Dette er strengt tatt ikke gyldig geojson (som skal ha lengde/breddegrad), men vi ser gjennom fingrene med det akkurat nå.</p> 

<p>Om du er interessert i vegreferansen som var gyldig på en gitt dato kan du angi det i spørringen. Svaret vil da utheve den verdien som var gyldig på det tidspunktet med egenskapverdien <em>fremhev=fremhev</em>, alternativt <em>fremhev=fremhevidag</em> hvis vegreferansen for angitt dato fremdeles er gyldig i dag. 


<h1>Endepunkt <a href="./posisjon?ost=259491.89&nord=7030393" >/posisjon</a></h1>

<p>Oppslag på geografisk koordinat. Viser tidsutvikling av vegreferanse i et punkt i vegnettet. 


<table cellpadding="10">
  <thead align="left">
    <th>Parameter</th>
    <th>beskrivelse</th>
  </thead>
  <tr>
    <td>ost, nord</td>
    <td>Påkrevd. Koordinater for spørringen, i UTM sone 33 (EPSG:25833).</td>
  </tr>
  <tr>
    <td>dato</td>
    <td>Valgfri, kan sløyfes. Uthever den vegreferanse-verdien som er på den datoen som er mest interessant for deg - men merk at denne datoen er FØR 31. oktober 2022. Syntaks=2015-01-31</td>
  </tr>


  <!-- <tr>
    <td>crs</td>
    <td>Valgfri, kan sløyfes. Koordinatsystem for returdata. Standard er 25833 (utm sone 33). 
    Bruk crs=4326 for å få standard lon, lat verdier. <em>Bruk av UTM-koordinater i geojson er 
    strengt tatt ikke gyldig geojson.</em></td>
  </tr>
  -->
  <tr>
    <td>fjerndubletter</td>
    <td>Valgfri, default=false. Slår sammen oppføringer som har samme posisjon og er naboer i tid (fradato på den ene = 
    tildato på den andre). Gyldig syntaks for å bruke denne funksjonen er <em>fjerndubletter=true</em> </td>
  </tr>

</table>

<h4>Eksempler</h4>

<p><a href="https://jansimple.pythonanywhere.com/vviwrapper/posisjon?ost=259491.89&nord=7030393">
https://jansimple.pythonanywhere.com/vviwrapper/posisjon?ost=259491.89&nord=7030393</a>

<p><a href="https://jansimple.pythonanywhere.com/vviwrapper/posisjon?ost=259491.89&nord=7030393&dato=2004-05-01">
https://jansimple.pythonanywhere.com/vviwrapper/posisjon?ost=259491.89&nord=7030393&dato=2004-05-01</a>

<h1>Endepunkt <a href="./vegreferanse?fylke=50&kat=E&vegnr=6">/vegreferanse</a></h1>

Slår opp på angitt vegreferanse og finner tidsutvikling. 

<table cellpadding="10">
  <thead align="left">
    <th>Parameter</th>
    <th>defaultverdi</th> 
    <th>beskrivelse</th>
  </thead>
  <tr>
    <td>fylke</td>
    <td></td> 
    <td>Påkrevd. Fylkesnummer.</td>
  </tr>
  <tr>
    <td>kommune</td>
    <td>00</td> 
    <td>Valgfri. Kommunenummer.</td>
  </tr>

  <tr>
    <td>kat</td>
    <td></td> 
    <td>Påkrevd. Vegkategori kortform, f.eks. E for Europaveg, P for privat veg.</td>
  </tr>

  <tr>
    <td>stat</td>
    <td>V</td> 
    <td>Valgfri. Vegstatus kortform, for eksempel V (Eksisterende veg) eller G (Gang-/sykkelveg)</td>
  </tr>

  <tr>
    <td>vegnr</td>
    <td></td> 
    <td>Påkrevd. Vegnummer</td>
  </tr>

  <tr>
    <td>hp</td>
    <td>1</td> 
    <td>Valgfri. Hovedparsellnummer</td>
  </tr>

  <tr>
    <td>meter</td>
    <td>1</td> 
    <td>Valgfri. Meterverdi.</td>
  </tr>

  <tr>
    <td>dato</td>
    <td></td> 
    <td>Valgfri. Uthever den vegreferanse-verdien som er på den datoen som er mest interessant for deg - vel og merke FØR 31. oktober 2022. Syntaks=2015-12-31. </td>
  </tr>

<!--
    <td>crs</td>
    <td>25833</td>
    <td>Valgfri. Koordinatsystem for returdata. Standard er 25833 (utm sone 33). 
    Bruk crs=4326 for å få standard lon, lat verdier. <em>Bruk av UTM-koordinater i geojson er 
    strengt tatt ikke gyldig geojson.</em></td>
  </tr>
-->
  <tr>
    <td>fjerndubletter</td>
    <td>false</td>
    <td>Valgfri. Slår sammen oppføringer som har samme posisjon og er naboer i tid (fradato på den ene = 
    tildato på den andre). Gyldig syntaks er <em>fjerndubletter=true</em> </td>
  </tr>

  <tr>
    <td>hentdagensverdi</td>
    <td>false</td>
    <td>Valgfri. Supplererer tabellen med den vegreferanseverdien som gjelder i dag (såfremt lenken ikke er satt historisk). Gyldig syntaks er <em>hentdagensverdi=true</em> </td>
  </tr>



</table>

<h4>Eksempler</h4>

<p>Kun påkrevde parametre: <a href="https://jansimple.pythonanywhere.com/vviwrapper/vegreferanse?fylke=50&kat=E&vegnr=6">
https://jansimple.pythonanywhere.com/vviwrapper/vegreferanse?fylke=50&kat=E&vegnr=6</a>

<p>Alle parametre: <a href="https://jansimple.pythonanywhere.com/vviwrapper/vegreferanse?fylke=50&kat=E&stat=V&vegnr=6&hp=2&meter=234&dato=2017-05-01">
https://jansimple.pythonanywhere.com/vviwrapper/vegreferanse?fylke=50&kat=E&stat=V&vegnr=6&hp=2&meter234&dato=2017-05-01</a>
</p>

<h1>Eksempel på returnert geojson</h1>

<pre>
{
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    221607.72397662446,
                    6922956.212648502,
                    823.4351722825646
                ]
            },
            "properties": {
                "vegref": "5000 Ev6 hp2 m234",
                "fradato": "2019-05-02",
                "tildato": "9999-12-31",
                "veglenkeid": "72145",
                "veglenkeposisjon": 0.14300579,
                "fremhev": "idag"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    226214.84937318598,
                    6950145.6252608765,
                    534.4892329195023
                ]
            },
            "properties": {
                "vegref": "5000 Ev6 hp2 m234",
                "fradato": "2015-10-14",
                "tildato": "2019-05-02",
                "veglenkeid": "2438156",
                "veglenkeposisjon": 0.14270796,
                "fremhev": "fremhev"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    226115.0149675297,
                    6950317.065347192,
                    528.4610572504488
                ]
            },
            "properties": {
                "vegref": "5000 Ev6 hp2 m234",
                "fradato": "2014-02-13",
                "tildato": "2015-10-14",
                "veglenkeid": "72804",
                "veglenkeposisjon": 0.34759146,
                "fremhev": "gammalt"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    296230.0378108146,
                    7041883.82635584,
                    7.9422936819083185
                ]
            },
            "properties": {
                "vegref": "5000 Ev6 hp2 m234",
                "fradato": "1990-06-07",
                "tildato": "1995-10-18",
                "veglenkeid": "578644",
                "veglenkeposisjon": 0.0189592,
                "fremhev": "gammalt"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    296178.3030646231,
                    7041830.283672808,
                    10.064210212813876
                ]
            },
            "properties": {
                "vegref": "5000 Ev6 hp2 m234",
                "fradato": "1950-01-01",
                "tildato": "1990-06-07",
                "veglenkeid": "578644",
                "veglenkeposisjon": 0.02669658,
                "fremhev": "gammalt"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    226114.75121219654,
                    6950316.845476401,
                    528.4597550219544
                ]
            },
            "properties": {
                "vegref": "5000 Ev6 hp2 m234",
                "fradato": "1950-01-01",
                "tildato": "2014-02-13",
                "veglenkeid": "72804",
                "veglenkeposisjon": 0.34755538,
                "fremhev": "gammalt"
            }
        }
    ],
    "crs": {
        "type": "name",
        "properties": {
            "name": "urn:ogc:def:crs:EPSG::25833"
        }
    }
}

</pre>


</body>
</html>
